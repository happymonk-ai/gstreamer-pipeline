kind: pipeline
type: docker
name: docker-compose

steps:
- name: build
  image: docker:dind
  commands:
  - docker compose build

- name: deploy
  image: docker:dind
  commands:
  - docker compose up -d
  when:
    branch: main
  depends_on:
  - build
